#!/usr/bin/env python3
"""
A small script that makse it easier to run the tests from any place inside the 
repository. It takes the same arguments as ``trial`` does.
"""
import os
import subprocess
import sys

def get_root():
    """
    A function to get the path to the root of the directory
    """
    return subprocess.run(['git', 'rev-parse', '--show-toplevel'], 
                stdout=subprocess.PIPE).stdout.rstrip().decode('utf-8')

def main():
    """
    The main function for running the actual tests.
    """
    os.environ['PYTHONPATH'] = get_root() + (":" + os.getenv('PYTHONPATH') 
            if os.getenv('PYTHONPATH') else "")
    subprocess.run(['trial'] + sys.argv[1:])

if __name__ == '__main__':
    main()
